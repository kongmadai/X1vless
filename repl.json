//note:
//### tinyurl =  g i th 🐎 ub .co m / X 🐎T L S/ X r🐎 ay -c or e/rel ea ses/la🐎 test/dow🐎 nload/ X r ay -🐎 l i n u x - 64.zip
//###curl -L -H "Cache-Control: no-cache" -o /tmp/zip/temp.zip https://tinyurl.com/yc3v8rbm
//###curl -L -H "Cache-Control: no-cache" -o /tmp/zip/temp.zip https://git🐎hub.c🐎om /XT🐎 LS/Xr🐎 ay-core/releases/downl🐎oad/v1.7🐎.5/Xr ay-linux-6🐎4.zip

{
	
    "stats": {},
    "api": {
        "tag": "api",
        "services": [
            "StatsService"
        ]
    },	
    "policy": {
        "levels": {
            "0": {
                "statsUserUplink": true,
                "statsUserDownlink": true
            }
        },
        "system": {
            "statsInboundUplink": true,
            "statsInboundDownlink": true,
            "statsOutboundUplink": true,
            "statsOutboundDownlink": true
        }
    },
	

	
  "inbounds": [
	  
        {
            "listen": "127.0.0.1",
            "port": 10085,
            "protocol": "dokodemo-door",
            "settings": {
                "address": "127.0.0.1"
            },
            "tag": "api"
        },
	  
	  
    {
      "port": 26369,
      "listen":"127.0.0.1",  
      "protocol": "vless",
      "settings": {
        "clients": [
                      {
                        "id": "8086cefa",
                        "level": 0,
                        "email": "websocket接入"
                      }
                    ],
		    "decryption": "none"	
       },
      "streamSettings": {
                      "network": "ws",
                      "wsSettings": {
                      "path": "8086ppla",
                      "acceptProxyProtocol": true
        } 
      },
      "sniffing": {
        "enabled": true,
        "destOverride": [
          "http",
          "tls"
        ]
      }
    },
      { 
      "port": 8080,
      "protocol": "vless",
      "settings": {
        "decryption":"none",
        "clients": [
                    {
                      "id": "8086cefa",
                      "email": "TCP接入"
                    }
                  ],
        "fallbacks": [
              { 
                  "dest": "109.228.56.253:80" // 198.185.159.144,198.49.23.144查找 ip address: ping scphoto graphy.co.uk
              },
              {
                  "path": "8086ppla", 
                  "dest": 26369,
                  "xver": 1
              }
        ]        
      },
      "streamSettings": {
        "network": "tcp",
        "security": "none"
      }
    }
  ],
  "outbounds": [

    {
      "protocol": "wireguard",
      "settings": {
        "secretKey": "8086suij",  
        "Address": ["172.16.0.2/32","8086aprj/128"], 
        "dns": "1.1.1.1",
        "mtu": 1280,
        "workers": 1,
        "peers": [
          {
            "publicKey": "bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=",
            "allowedIPs": ["0.0.0.0/0", "::/0"],
            "keepAlive": 1,
         //////   "endpoint": "162.159.192.1:2408"
                  "endpoint": "engage.cloudflareclient.com:2408"
         //////   "endpoint": "162.159.195.4:2408"
         //////   "endpoint": "162.159.192.1:2408"
          }
        ]
      },
      "tag": "wgcf"
    },
  
	  
    {
      "protocol": "freedom",
      "settings": { "domainStrategy": "UseIPv4" },
      "tag": "free"
    }, 
    {
      "protocol": "shadowsocks",
      "settings": {
          "servers": [
              {
                  "address": "8086rfiu",
                  "port": 32824,
                  "method": "chacha20-ietf-poly1305",
                  "password": "8086qgpx"
              }
          ]
      },
      "streamSettings": {
          "network": "tcp"
      },
      "tag": "SSout"
    },

    {
      "protocol": "blackhole",
      "tag": "blocked"        }
  ],
  "log": {  
      "access": "/tmp/webservice/access.log",
      "error": "/tmp/webservice/error.log",
      "loglevel": "info"  
         },
  "dns": {
    "servers": [
      "https+local://1.1.1.1/dns-query",
    		{
    		  "address": "8.8.8.8",
    		  "port": 53,
    		  "domains": [ 
                   "geosite:facebook",
    		   "domain:onedrive.com"]  
    		},   
      "localhost" ]
  },
  "routing": {
    "domainStrategy": "IPIfNonMatch",
    "rules": [
	    
	{
	"inboundTag": [
	    "api"
	],
	"outboundTag": "api",
	"type": "field"
	},
	    
	{
	"type": "field",
	"ip": ["geoip:private"],
	"outboundTag": "blocked"
	},
      
    {  
      "type": "field",
      "domain": [
         "domain:aefasdk43fsdafda.com"
         // "geosite:category-ads-all"    //广告不拦截 free
      ], 
      "outboundTag": "blocked"
    },
      
    {
        "domain": [
            "domain:goosadfasdgle.co.nz"//,
            //"geosite:cn"
        ],
        "outboundTag": "SSout",
        "type": "field"
    },              
	{
		"ip": [
			"geoip:cn"
		],
		"outboundTag": "wgcf",
		"type": "field"
	},  
      
    {
        "domain": [
                "domain:sharepoasdfsadint.com",          
                "domain:googlsdfaevideo.com",
                "domain:googleasfasdf.co.uk"       
        ],
        "outboundTag": "free",
        "type": "field"
    },     
	    
    {    // 下面这个减去上面这个例外  就是去SS的流量。   其他流量默认wgcf
        "domain": [
            //    "geosite:google",
            //    "geosite:microsoft",
            //    "geosite:twitter",
            //    "geosite:github",
            //    "geosite:netflix",
            //    "domain:exoticaz.to",
                "domain:opafasdfenai.com"
        ],
        "outboundTag": "SSout",
        "type": "field"
    } 

    ]
  }
}
